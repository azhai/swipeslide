var SwipeSlide=function(a,b){this.options=$.extend({first:0,visibleSlides:1,vertical:false,tolerance:0.5,delay:0.3,easing:"ease-out",autoPlay:false,useTranslate3d:true,bulletNavigation:"link",paginateLabel:false,directionalNavigation:false,beforeChange:null,afterChange:null},b);this.isVertical=!!this.options.vertical;this.container=$(a).addClass("ui-swipeslide").addClass("ui-swipeslide-"+(this.isVertical?"vertical":"horizontal"));this.reel=this.container.children().first().addClass("ui-swipeslide-reel");this.slides=this.reel.children().addClass("ui-swipeslide-slide");this.numPages=Math.ceil(this.slides.length/this.options.visibleSlides);this.currentPage=this.validPage(this.options.first);this.touch={};this.isTouch="ontouchstart" in document.documentElement;this.events={start:this.isTouch?"touchstart":"mousedown",move:this.isTouch?"touchmove":"mousemove",end:this.isTouch?"touchend touchcancel touchleave":"mouseup mouseout mouseleave",click:this.isTouch?"touchend":"click"};this.setup();this.addEventListeners();if(this.options.directionalNavigation){this.setupDirectionalNavigation()}if(this.options.paginateLabel){this.setupPaginateLabel()}if(this.options.bulletNavigation){this.setupBulletNavigation()}if(this.options.autoPlay){this.autoPlay()}};SwipeSlide.prototype={page:function(a){this.stopAutoPlay();var b=this.validPage(a),c;if(this.currentPage!=b){if($.isFunction(this.options.beforeChange)){this.options.beforeChange(this,this.currentPage,b)}this.currentPage=b;c=$.proxy(this.callback,this)}else{if(this.options.autoPlay){c=$.proxy(this.autoPlay,this)}}this.move(0,this.options.delay,c);this.onActivePage()},first:function(){this.page(0)},next:function(){this.page(this.currentPage+1)},prev:function(){this.page(this.currentPage-1)},last:function(){this.page(this.numPages-1)},isFirst:function(){return this.currentPage==0},isLast:function(){return this.currentPage==this.numPages-1},validPage:function(a){return Math.max(Math.min(a,this.numPages-1),0)},autoPlay:function(){if(this.timeout){return false}var a=this.isLast()?this.first:this.next;this.timeout=setTimeout($.proxy(a,this),this.options.autoPlay*1000)},stopAutoPlay:function(){clearTimeout(this.timeout);delete this.timeout},visibleSlides:function(){return this.slides.slice(this.currentPage,this.currentPage+this.options.visibleSlides)},move:function(c,a,b){this.reel.animate(this.animationProperties(c),{duration:a*1000,easing:this.options.easing,complete:b})},animationProperties:function(c){var a=-this.currentPage*this.dimension+c+"px",b={};if(this.options.useTranslate3d){b["translate3d"]=(this.isVertical?"0,"+a:a+",0")+",0"}else{b[this.isVertical?"translateY":"translateX"]=a}return b},setup:function(){var a=this.isVertical?"height":"width";this.dimension=this.container[a]();this.tolerance=this.options.tolerance*this.dimension/2;this.reel[a](this.dimension*this.numPages+"px");this.slides[a](this.dimension/this.options.visibleSlides+"px");if($.isFunction(this.options.beforeChange)){this.options.beforeChange(this,this.currentPage,this.currentPage)}this.move(0,0)},addEventListeners:function(){this.reel.on(this.events.start,$.proxy(this.touchStart,this)).on(this.events.move,$.proxy(this.touchMove,this)).on(this.events.end,$.proxy(this.touchEnd,this));this.container.on(this.events.click,".next",$.proxy(this.next,this)).on(this.events.click,".prev",$.proxy(this.prev,this)).on(this.events.click,".first",$.proxy(this.first,this)).on(this.events.click,".last",$.proxy(this.last,this));$(window).on("resize",$.proxy(this.setup,this))},touchStart:function(a){this.touch.start=this.trackTouch(a);delete this.isScroll;if(!this.isTouch){return false}},touchMove:function(a){if(!this.touch.start){return}this.touch.end=this.trackTouch(a);var b=this.distance(this.isVertical);if(typeof this.isScroll=="undefined"){this.isScroll=Math.abs(b)<Math.abs(this.distance(!this.isVertical))}if(!this.isScroll){this.stopAutoPlay();this.move(this.withResistance(b),0);return false}},touchEnd:function(b){if(!this.isScroll){var c=this.distance(this.isVertical),a=0;if(Math.abs(c)>this.tolerance){a=c<0?1:-1}this.page(this.currentPage+a)}this.touch={};return false},trackTouch:function(a){var b=this.isTouch?a.touches[0]:a;return{x:b.pageX,y:b.pageY}},distance:function(a){var c=a?"y":"x";try{return this.touch.end[c]-this.touch.start[c]}catch(b){return 0}},withResistance:function(a){if(this.isFirst()&&a>0||this.isLast()&&a<0){a/=(1+Math.abs(a)/this.dimension)}return a},callback:function(){if($.isFunction(this.options.afterChange)){this.options.afterChange(this,this.currentPage)}if(this.options.autoPlay){this.autoPlay()}},setupDirectionalNavigation:function(){this.container.append('<ul class="ui-swipeslide-nav"><li class="prev">Previous</li><li class="next">Next</li></ul>')},setupPaginateLabel:function(){this.paginate=$('<div class="ui-swipeslide-page"></div>');this.paginate.append('<span class="page">1</span> / <span>'+this.numPages+"</span>");this.container.append(this.paginate)},setupBulletNavigation:function(){this.navBullets=$('<ul class="ui-swipeslide-bullets"></ul>');
for(i=0;i<this.numPages;i++){this.navBullets.append('<li data-index="'+i+'">'+(i+1)+"</li>")}if(this.options.bulletNavigation=="link"){this.navBullets.on(this.events.click,"li",$.proxy(function(a){this.page(parseInt($(a.currentTarget).data("index"),10))},this))}this.container.append(this.navBullets);this.onActivePage()},onActivePage:function(){if(this.navBullets){this.navBullets.children("li").removeClass("active").eq(this.currentPage).addClass("active")}if(this.paginate){this.paginate.children("span.page").html(this.currentPage+1)}}};var SwipeSlide3D=function(a,b){SwipeSlide.call(this,a,b);this.container.addClass("ui-swipeslide-3d")};SwipeSlide3D.prototype=new SwipeSlide;$.extend(SwipeSlide3D.prototype,{setup:function(){var a=this.isVertical?"height":"width";this.dimension=this.container[a]();this.tolerance=this.options.tolerance*this.dimension/2;this.alpha=360/this.slides.length*(this.isVertical?-1:1);this.radius=Math.round((this.dimension/2)/Math.tan(Math.PI/this.slides.length));this.slides.each($.proxy(this.positionSlide,this));this.move(0,0)},validPage:function(a){if(a<0){a+=this.numPages}else{if(a>=this.numPages){a%=this.numPages}}return a},animationProperties:function(b){var a=(this.alpha*b/this.dimension)-(this.alpha*this.currentPage);return{translate3d:"0,0,"+-this.radius+"px",rotate3d:this.vectorsWithDeg(a)}},positionSlide:function(b,a){$(a).animate({rotate3d:this.vectorsWithDeg(b*this.alpha),translate3d:"0,0,"+this.radius+"px"},{duration:0})},vectorsWithDeg:function(a){return(this.isVertical?"1,0":"0,1")+",0,"+a+"deg"},withResistance:function(a){return a}});(function(a){a.fn.swipeSlide=function(c){var b=(c=c||{}).threeD?SwipeSlide3D:SwipeSlide;return this.each(function(){var d=new b(this,c);if(typeof(a(this).data("swipeInstance",d).data("swipeInstance"))==="string"){a(this).removeAttr("data-swipeInstance")}return})}})(window.Zepto);